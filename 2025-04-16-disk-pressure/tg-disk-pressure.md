üî• DevOps-—Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å: DiskPressure, Talos –∏ –∑–∞–ø—É—Å–∫ Pod‚Äô–∞ –ª—é–±–æ–π —Ü–µ–Ω–æ–π

–ù–∞ –¥–Ω—è—Ö —Å–ª–æ–≤–∏–ª —Ä–µ–∞–ª—å–Ω—É—é –±–æ–ª—å –Ω–∞ K8s –∫–ª–∞—Å—Ç–µ—Ä–µ –ø–æ–¥ Talos: –Ω–∞–∫–æ—Å—è—á–∏–ª —Å `fio` –∫–æ–Ω—Ñ–∏–≥–æ–º –¥–ª—è `local-path-provisioner` –∏ –∑–∞–±–∏–ª –≤—Å–µ worker –Ω–æ–¥—ã –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è DiskPressure.

–£–¥–∞–ª–µ–Ω–∏–µ PV –Ω–µ –ø–æ–º–æ–≥–∞–ª–æ, –ø–æ–¥ provisioner'–∞ —Ç–æ–∂–µ –≤—ã–ª–µ—Ç–µ–ª.

–î—É–º–∞–ª, —Å–∞–º—ã–π —É–º–Ω—ã–π: –≤—ã–∫–∞—Ç–∏–ª DaemonSet —Å toleration –¥–ª—è `node.kubernetes.io/disk-pressure`... –Ω–æ –Ω–µ—Ç! Kubelet –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —ç–≤–∞–∫—É–∏—Ä—É–µ—Ç —Ç–∞–∫–∏–µ –ø–æ–¥—ã. –û–±—ã—á–Ω—ã–µ tolerations —Ç—É—Ç –±–µ—Å—Å–∏–ª—å–Ω—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ–º Talos, –∫—É–¥–∞ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –Ω–µ –∑–∞–π—Ç–∏.

–ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —Å–ø–∞—Å–ª–æ?

–ö–ª—é—á –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ! –ü—Ä–æ–ø–∏—Å–∞–ª —É Pod'–∞:
`priorityClassName: "system-cluster-critical"`

–¢–æ–ª—å–∫–æ —Å —ç—Ç–∏–º –∫–ª–∞—Å—Å–æ–º Kubernetes —Ä–∞–∑—Ä–µ—à–∏–ª –º–æ–µ–º—É DaemonSet'—É —Å—Ç–∞—Ä—Ç–∞–Ω—É—Ç—å –¥–∞–∂–µ –ø–æ–¥ DiskPressure! –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –∑–∞—Å–∫–æ—á–∏—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `/opt` —á–µ—Ä–µ–∑ `hostPath`, –±—ã—Å—Ç—Ä–æ –ø–æ—á–∏—Å—Ç–∏—Ç—å –º—É—Å–æ—Ä ‚Äî –∏ –≤—É–∞–ª—è, DiskPressure —É—à–µ–ª.

**–õ–∞–π—Ñ—Ö–∞–∫:**
*   –ù–∞ Talos (–∏ –Ω–µ —Ç–æ–ª—å–∫–æ) –ø—Ä–∏ DiskPressure —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ tolerations **–Ω–µ —Å–ø–∞—Å–∞—é—Ç** –æ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ Eviction.
*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π PriorityClass (`system-cluster-critical`) ‚Äî —ç—Ç–æ –≤–∞—à —à–∞–Ω—Å –∑–∞–ø—É—Å—Ç–∏—Ç—å Pod –¥–∞–∂–µ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –¥–∏—Å–∫–µ –∏ —Å–ø–∞—Å—Ç–∏ —Å–∏—Ç—É–∞—Ü–∏—é –±–µ–∑ –ª–∏—à–Ω–µ–π –±–æ–ª–∏. üí™

#kubernetes #devops #talos #diskpressure #lifehack